CREATE TABLE IF NOT EXISTS USER
(
    USER_ID  INTEGER PRIMARY KEY AUTO_INCREMENT,
    NAME     VARCHAR,
    EMAIL    VARCHAR,
    LOGIN    VARCHAR,
    BIRTHDAY DATE NOT NULL
);

CREATE TABLE IF NOT EXISTS FRIENDSHIP
(
    USER1_ID LONG        NOT NULL,
    USER2_ID LONG        NOT NULL,
    STATUS   VARCHAR(20) NOT NULL,
    PRIMARY KEY (USER1_ID, USER2_ID)
);

CREATE TABLE IF NOT EXISTS MPA
(
    MPA_ID INTEGER PRIMARY KEY,
    NAME   VARCHAR
);

CREATE TABLE IF NOT EXISTS FILM
(
    FILM_ID      INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    NAME         VARCHAR(50)  NOT NULL,
    RATE         INT,
    MPA_ID       INT          NOT NULL,
    DESCRIPTION  VARCHAR(200) NOT NULL,
    RELEASE_DATE DATE         NOT NULL,
    DURATION     INT          NOT NULL
);

CREATE TABLE IF NOT EXISTS GENRES
(
    GENRE_ID INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    NAME     VARCHAR(50) NOT NULL
);

CREATE TABLE IF NOT EXISTS FILM_GENRE
(
    FILM_ID  INTEGER REFERENCES FILM (FILM_ID) ON DELETE CASCADE,
    GENRE_ID INTEGER REFERENCES GENRES (GENRE_ID) ON DELETE CASCADE,
    PRIMARY KEY (FILM_ID, GENRE_ID)
);

CREATE TABLE IF NOT EXISTS LIKES
(
    FILM_ID INTEGER,
    USER_ID INTEGER
);